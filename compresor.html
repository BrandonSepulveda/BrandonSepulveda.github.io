<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compresor de Archivos y Carpetas (ZIP) | Brandon Sepulveda</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/BrandonSepulveda/ToolboxBS/refs/heads/main/images/Logo-30.ico" />
    
    <!-- Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9012803289038112" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2RY7LG5R21"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-2RY7LG5R21');
    </script>
    
    <!-- Stylesheets (Unificadas y Mejoradas) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- Fonts (Unificadas con el portafolio principal) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-dark: #000000;
            --bg-medium: #111111;
            --bg-light: #1A1A1A;
            --text-light: #FFFFFF;
            --text-muted: #999999;
            --text-muted-lighter: #b0b0b0;
            --accent-primary: #FFFFFF;
            --accent-secondary: #333333;
            --kick-color: #53FC18;
            --border-color: rgba(255, 255, 255, 0.1);
            --transition-speed: 0.4s;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-dark); color: var(--text-muted); display: flex; flex-direction: column; min-height: 100vh; }
        main { flex: 1 0 auto; }
        h1, h2, h3, h4, h5, h6 { font-weight: 800; color: var(--text-light); }
        .section { padding: 6rem 0; }
        .section-title { font-size: clamp(2rem, 5vw, 2.8rem); font-weight: 900; margin-bottom: 1rem; }
        .section-subtitle { font-size: 1.1rem; max-width: 650px; margin-left: auto; margin-right: auto; margin-bottom: 4rem; color: var(--text-muted-lighter); }
        #mainNav { background-color: transparent; padding: 1.25rem 0; transition: all var(--transition-speed) ease; }
        #mainNav.navbar-scrolled { background-color: rgba(0, 0, 0, 0.75); backdrop-filter: blur(15px); padding: 0.75rem 0; border-bottom: 1px solid var(--border-color); }
        #mainNav .navbar-brand { color: var(--text-light); font-weight: 800; font-size: 1.25rem; }
        #mainNav .navbar-brand img { transition: transform var(--transition-speed) ease; }
        #mainNav .navbar-brand:hover img { transform: rotate(-15deg); }
        #mainNav .nav-link { color: var(--text-muted); font-weight: 600; padding: 0.5rem 1rem; transition: color var(--transition-speed) ease; }
        #mainNav .nav-link:hover, #mainNav .nav-link.active { color: var(--text-light); }
        #mainNav .navbar-toggler { border: 1px solid var(--border-color); }
        #mainNav .navbar-toggler-icon { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e"); }
        
        .upload-area { border: 2px dashed var(--border-color); border-radius: 15px; padding: 3rem; text-align: center; cursor: pointer; background-color: var(--bg-light); transition: all var(--transition-speed) ease; }
        .upload-area.dragover { border-color: var(--kick-color); background-color: var(--accent-secondary); transform: scale(1.02); }
        .upload-area i { font-size: 3rem; color: var(--kick-color); margin-bottom: 1rem; }

        .control-panel { background-color: var(--bg-light); border-radius: 15px; padding: 1.5rem; border: 1px solid var(--border-color); }
        .control-panel label { font-weight: 600; color: var(--text-muted-lighter); margin-bottom: 0.75rem; display: block; }
        
        .form-control { background-color: var(--bg-medium); color: var(--text-light); border-color: var(--border-color); }
        .form-control:focus { background-color: var(--bg-medium); color: var(--text-light); border-color: var(--kick-color); box-shadow: 0 0 15px rgba(83, 252, 24, 0.2); }
        input[type="range"] { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background: var(--accent-secondary); border-radius: 5px; outline: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; background: var(--kick-color); cursor: pointer; border-radius: 50%; }
        .slider-value { min-width: 40px; text-align: center; background-color: var(--bg-medium); padding: 5px 10px; border-radius: 10px; font-weight: 600; }

        .file-list-container { max-height: 500px; overflow-y: auto; background-color: var(--bg-light); border-radius: 15px; padding: 1rem; border: 1px solid var(--border-color); }
        .file-item { display: flex; align-items: center; gap: 1rem; background-color: var(--bg-medium); padding: 0.75rem 1rem; border-radius: 10px; margin-bottom: 0.5rem; border: 1px solid var(--border-color); font-size: 0.9rem; }
        .file-item i { color: var(--kick-color); }
        .file-item-path { flex-grow: 1; color: var(--text-light); font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .file-item-size { font-weight: 600; color: var(--text-muted); }

        .btn { padding: 0.8rem 2rem; font-weight: 700; border-radius: 50px; transition: all var(--transition-speed) ease; border: 2px solid transparent; }
        .btn-kick { background-color: var(--kick-color); color: var(--bg-dark); box-shadow: 0 0 20px rgba(83, 252, 24, 0.3); }
        .btn-kick:hover:not(:disabled) { background-color: var(--kick-color); color: var(--bg-dark); transform: translateY(-3px) scale(1.05); box-shadow: 0 0 30px rgba(83, 252, 24, 0.5); }
        .btn.disabled, .btn:disabled { background-color: var(--accent-secondary); border-color: var(--accent-secondary); color: var(--text-muted); cursor: not-allowed; transform: none; box-shadow: none; }
        
        .progress { height: 10px; background-color: var(--accent-secondary); }
        .progress-bar { background-color: var(--kick-color); }

        footer { background-color: var(--bg-medium); padding: 3rem 0; border-top: 1px solid var(--border-color); }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="https://github.com/BrandonSepulveda/BrandonSepulveda.github.io/blob/main/logo/Logo-30.png?raw=true" alt="Logo" style="height: 30px; width: auto; margin-right: 10px;">
                Brandon Sepulveda
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="herramientas.html">Herramientas</a></li>
                    <li class="nav-item"><a class="nav-link active" href="#">Compresor ZIP</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <main>
        <section class="section">
            <div class="container">
                <div class="text-center" data-aos="fade-up">
                    <h2 class="section-title">Compresor de Archivos Universal</h2>
                    <p class="section-subtitle">
                        Arrastra y suelta archivos o carpetas para crear un archivo .ZIP al instante. Ideal para agrupar y enviar archivos pesados de forma segura.
                    </p>
                </div>

                <div class="row g-4">
                    <div class="col-lg-4" data-aos="fade-right">
                        <div class="control-panel mb-4">
                             <h5><i class="fas fa-cogs me-2"></i>Opciones</h5>
                             <hr class="border-secondary my-3">
                             <div class="mb-3">
                                 <label for="zipName">Nombre del Archivo ZIP</label>
                                 <input type="text" id="zipName" class="form-control" value="paquete-comprimido">
                             </div>
                             <div class="mb-3">
                                <label for="compressionLevel">Nivel de Compresi√≥n</label>
                                <div class="d-flex align-items-center gap-3">
                                    <input type="range" id="compressionLevel" min="1" max="9" step="1" value="6">
                                    <span class="slider-value" id="compressionLevelValue">6</span>
                                </div>
                                <small class="form-text text-muted mt-2 d-block">Nivel 9: Mejor compresi√≥n, m√°s lento.</small>
                            </div>
                        </div>
                        <div class="d-grid gap-2">
                            <button id="compressButton" class="btn btn-kick" disabled><i class="fas fa-file-archive me-2"></i>Comprimir y Descargar</button>
                            <button id="clearListButton" class="btn btn-sm btn-danger mt-2" disabled><i class="fas fa-trash me-2"></i>Limpiar Lista</button>
                        </div>
                         <div id="progressContainer" class="mt-4 d-none">
                            <p id="progressLabel" class="mb-1 text-light fw-bold">Comprimiendo...</p>
                            <div class="progress">
                                <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-8" data-aos="fade-left">
                        <div id="uploadContainer">
                            <div class="upload-area" id="uploadArea">
                                <i class="fas fa-folder-plus"></i>
                                <h5>A√±adir Archivos y Carpetas</h5>
                                <p class="small text-muted">Haz clic o arrastra contenido aqu√≠</p>
                                <input type="file" id="fileInput" class="d-none" multiple webkitdirectory>
                            </div>
                        </div>
                        <div id="fileListContainer" class="file-list-container mt-4 d-none">
                            <div id="fileList"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="footer text-center">
        <div class="container">
            <p class="text-muted mb-0">Copyright &copy; Jhon Brandon Sepulveda Valdes 2025</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            AOS.init({ duration: 800, once: true, offset: 50 });

            const mainNav = document.getElementById('mainNav');
            if (mainNav) {
                window.addEventListener('scroll', () => {5
                    if (window.scrollY > 50) mainNav.classList.add('navbar-scrolled');
                    else mainNav.classList.remove('scrolled');
                });
            }

            const fileInput = document.getElementById('fileInput');
            const uploadArea = document.getElementById('uploadArea');
            const fileListContainer = document.getElementById('fileListContainer');
            const fileList = document.getElementById('fileList');
            const zipNameInput = document.getElementById('zipName');
            const compressionLevelSlider = document.getElementById('compressionLevel');
            const compressionLevelValue = document.getElementById('compressionLevelValue');
            const compressButton = document.getElementById('compressButton');
            const clearListButton = document.getElementById('clearListButton');
            const progressContainer = document.getElementById('progressContainer');
            const progressBar = document.getElementById('progressBar');
            const progressLabel = document.getElementById('progressLabel');

            let filesToProcess = [];

            const formatBytes = (bytes, decimals = 2) => {
                if (!bytes || bytes === 0) return '0 Bytes';
                const k = 1024;
                const dm = decimals < 0 ? 0 : decimals;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
            };
            
            const getFileIcon = (fileName) => {
                const extension = fileName.split('.').pop().toLowerCase();
                const iconMap = {
                    'png': 'fa-file-image', 'jpg': 'fa-file-image', 'jpeg': 'fa-file-image', 'gif': 'fa-file-image',
                    'pdf': 'fa-file-pdf',
                    'doc': 'fa-file-word', 'docx': 'fa-file-word',
                    'xls': 'fa-file-excel', 'xlsx': 'fa-file-excel',
                    'zip': 'fa-file-archive', 'rar': 'fa-file-archive',
                    'txt': 'fa-file-alt',
                    'mp3': 'fa-file-audio', 'wav': 'fa-file-audio',
                    'mp4': 'fa-file-video', 'mov': 'fa-file-video',
                };
                return iconMap[extension] || 'fa-file';
            };

            const updateUI = () => {
                const hasFiles = filesToProcess.length > 0;
                compressButton.disabled = !hasFiles;
                clearListButton.disabled = !hasFiles;
                fileListContainer.classList.toggle('d-none', !hasFiles);
            };

            const addFileToList = (file) => {
                const filePath = file.webkitRelativePath || file.name;
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <i class="fas ${getFileIcon(file.name)} me-2"></i>
                    <span class="file-item-path">${filePath}</span>
                    <span class="file-item-size">${formatBytes(file.size)}</span>
                `;
                fileList.appendChild(fileItem);
            };

            const handleFiles = (files) => {
                [...files].forEach(file => {
                    filesToProcess.push(file);
                    addFileToList(file);
                });
                updateUI();
            };
            
            const handleDrop = async (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                if (!e.dataTransfer) return;

                const items = e.dataTransfer.items;
                for (const item of items) {
                    const entry = item.webkitGetAsEntry();
                    if (entry) {
                        await traverseFileTree(entry);
                    }
                }
                updateUI();
            };
            
            const traverseFileTree = async (entry) => {
                if (entry.isFile) {
                    entry.file(file => {
                        file.webkitRelativePath = entry.fullPath.substring(1);
                        filesToProcess.push(file);
                        addFileToList(file);
                    });
                } else if (entry.isDirectory) {
                    const dirReader = entry.createReader();
                    dirReader.readEntries(async (entries) => {
                        for (const subEntry of entries) {
                            await traverseFileTree(subEntry);
                        }
                    });
                }
            };

            compressButton.addEventListener('click', async () => {
                if (filesToProcess.length === 0) return;

                compressButton.disabled = true;
                progressContainer.classList.remove('d-none');
                
                const zip = new JSZip();
                filesToProcess.forEach(file => {
                    const path = file.webkitRelativePath || file.name;
                    zip.file(path, file);
                });

                const compressionLevel = parseInt(compressionLevelSlider.value, 10);

                zip.generateAsync({ 
                    type: 'blob',
                    compression: "DEFLATE",
                    compressionOptions: {
                        level: compressionLevel
                    }
                }, (metadata) => {
                    const percent = metadata.percent.toFixed(2);
                    progressBar.style.width = `${percent}%`;
                    progressLabel.textContent = `Comprimiendo... ${Math.round(percent)}%`;
                }).then(content => {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(content);
                    const zipFileName = zipNameInput.value || 'paquete-comprimido';
                    link.download = `${zipFileName}.zip`;
                    link.click();
                    
                    progressLabel.textContent = '¬°Completado!';
                    setTimeout(() => {
                        progressContainer.classList.add('d-none');
                        compressButton.disabled = false;
                    }, 2000);
                });
            });
            
            clearListButton.addEventListener('click', () => {
                fileList.innerHTML = '';
                filesToProcess = [];
                updateUI();
            });
            
            compressionLevelSlider.addEventListener('input', () => {
                compressionLevelValue.textContent = compressionLevelSlider.value;
            });

            uploadArea.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', e => handleFiles(e.target.files));
            uploadArea.addEventListener('dragover', e => { e.preventDefault(); uploadArea.classList.add('dragover'); });
            uploadArea.addEventListener('dragleave', () => uploadArea.classList.remove('dragover'));
            uploadArea.addEventListener('drop', handleDrop);
        });
    </script>
</body>
</html>
